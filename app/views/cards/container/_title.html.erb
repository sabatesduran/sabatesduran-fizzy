<% if card.published? %>
  <%= turbo_frame_tag card, :edit do %>
    <div class="full-width">
      <h1 class="card__title flex align-start gap-half">
        <%= link_to card.title, edit_collection_card_path(card.collection, card), class: "card__title-link" %>
      </h1>
      <p class="card__description margin-block-half">
        <%= sanitize card.description_html %>
      </p>
    </div>
  <% end %>
<% else %>
  <%= form_with model: card, url: collection_card_path(card.collection, card), id: "card_form", class: "full-width", data: { controller: "auto-save" } do |form| %>
    <h1 class="card__title">
      <%= form.text_area :title, placeholder: "Name it…",
            class: "input input--textarea full-width borderless txt-align-start",
            autofocus: card.title.blank?,
            data: { action: "auto-save#change blur->auto-save#submit keydown.enter->auto-save#submit:prevent keydown.ctrl+enter->auto-save#submit:prevent" } %>
    </h1>
    <div class="card__description margin-block-half">
      <%= form.markdown_area :description, class: "input input--textarea full-width borderless txt-align-start card-field__description",
            placeholder: "Add some notes, context, pictures, or video about this…",
            data: { action: "keydown.ctrl+enter->form#submit:prevent keydown.meta+enter->form#submit:prevent keydown.esc->form#cancel:stop paste->paste#pasteFiles" } %>
    </div>
    <%= form.button "Save changes", type: :submit, class: "btn"%>
  <% end %>
<% end %>